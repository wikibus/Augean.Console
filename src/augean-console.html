<dom-module id="augean-console">
    <template>
        <style>
            :host {
                display: block;
            }

            [main] paper-input {
                --paper-input-container-color: white;
                --paper-input-container-input-color: white;
                pointer-events: auto !important;
            }
        </style>

        <paper-multidrawer-panel>

            <paper-header-panel left-drawer class="flex">
                <paper-toolbar>
                    <div class="title">Console</div>
                </paper-toolbar>
                <div>Content goes here...</div>
            </paper-header-panel>

            <paper-header-panel right-drawer>
                <paper-toolbar>
                    <div class="title">Documentation</div>
                </paper-toolbar>
                <div>Content goes here...</div>
            </paper-header-panel>

            <paper-header-panel main>
                <paper-toolbar class="medium-tall">
                    <div class="title">Augean Hydra Console</div>

                    <paper-input id="resource" class="middle title" label="address"
                                 pattern="^https?://.*" no-label-float auto-validate
                                 invalid="{{addressInvalid}}"
                                 value="{{url}}">
                        <iron-icon prefix icon="icons:language"></iron-icon>
                    </paper-input>
                    <paper-icon-button class="middle" icon="av:play-circle-filled" disabled="[[addressInvalid]]"
                    on-tap="load"/>
                </paper-toolbar>
                <div>
                    <object-view model="[[displayedModel]]" on-show-model="showModel"></object-view>
                </div>
            </paper-header-panel>
        </paper-multidrawer-panel>

        <!--

        <button on-tap="back" hidden$="[[!hasPreviousModel(_modelHistory.*)]]">Back</button>

        -->
    </template>
</dom-module>

<dom-module id="object-view">
    <template>
        <style>
            :host {
                display: block;
            }
        </style>

        <div hidden$="[[!isLiteral]]">
            <default-literal-view literal="[[model]]"></default-literal-view>
        </div>

        <div hidden$="[[!isResource]]">
            <button on-tap="showModel" hidden$="[[!nested]]" data-to-show="[[model]]">Show</button>
            <template is="dom-if" if="[[!nested]]">
                <default-resource-view resource="[[model]]"
                                       nesting-level="[[nextLevel(nestingLevel)]]"></default-resource-view>
            </template>
        </div>

        <div hidden$="[[!isArray]]">
            <template is="dom-repeat" items="[[arrayModel]]" as="item">
                <button on-tap="showModel" data-to-show="[[item]]" hidden$="[[!nested]]">Show</button>
                <template is="dom-if" if="[[!nested]]">
                    <object-view model="[[item]]" nesting-level="[[nestingLevel]]"></object-view>
                </template>
            </template>
        </div>
    </template>
</dom-module>

<dom-module id="default-literal-view">
    <template>
        <style>
            :host {
                display: block;
            }
        </style>

        <span>[[literalValue]]</span>
    </template>
</dom-module>

<dom-module id="default-resource-view">
    <template>
        <style>
            :host {
                display: block;
            }

            paper-material {
                margin: 10px;
                padding: 10px;
            }
        </style>

        <paper-card heading="[[resource.id]]">
            <div class="card-content">
                <template is="dom-repeat" items="[[getKeys(resource)]]" as="item">
                    <h3>
                        <documented-property resource="[[resource]]" property-id="[[item.0]]"></documented-property>
                    </h3>
                    <div>
                        <object-view model="[[item.1]]" nesting-level="[[nestingLevel]]"></object-view>
                    </div>
                </template>
            </div>
        </paper-card>
    </template>
</dom-module>

<dom-module id="documented-property">
    <template>
        {{propertyTitle}}
    </template>
</dom-module>

<script>
    System.import('src/augean-console');
</script>