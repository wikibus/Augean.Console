<link rel="import" href="console-templates.html" />
<link rel="import" href="fallback-templates.html" />
<link rel="import" href="hydra-templates.html" />
<link rel="import" href="../bower_components/ld-navigation/ld-navigation.html"/>

<dom-module id="augean-console">
    <template>
        <style>
            :host {
                display: block;
            }

            [main] paper-input {
                --paper-input-container-color: white;
                --paper-input-container-input-color: white;
                pointer-events: auto !important;
            }

            #spinner-container {
                position: absolute;
                width: 100%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }
        </style>


        <div>
            <template is="any-object-template" as="image" predicate="http://schema.org/image" compact-with='{ "@vocab": "http://schema.org/" }'>
                <img src="[[image.thumbnail.contentUrl]]" />
            </template>

            <template scope="resource-card-actions" is="any-object-template" as="image" predicate="http://schema.org/image" compact-with='{ "@vocab": "http://schema.org/" }'>
                <a href="[[image.contentUrl]]" target="_blank">
                    <iron-icon icon="icons:zoom-in"></iron-icon>
                </a>
            </template>
        </div>

        <console-templates></console-templates>
        <hydra-templates></hydra-templates>
        <fallback-templates></fallback-templates>

        <ld-navigator on-resource-url-changed="urlChanged"></ld-navigator>
        <ld-html5-history></ld-html5-history>

        <paper-multidrawer-panel id="drawerPanel"
                                 force-right-drawer-temporary="true"
                                 disable-right-edge-swipe="true">

            <paper-header-panel left-drawer class="flex">
                <paper-toolbar>
                    <div class="title">Console</div>
                </paper-toolbar>
                <div>Content goes here...</div>
            </paper-header-panel>

            <paper-header-panel right-drawer>
                <paper-toolbar>
                    <div class="title">Documentation</div>
                </paper-toolbar>
                <div>
                    <api-documentation-viewer id="apiDocumentation" api-docs="[[model.apiDocumentation]]"
                                              model-types="[[currentModel.types]]"></api-documentation-viewer>
                </div>
            </paper-header-panel>

            <paper-header-panel main>
                <paper-toolbar class="medium-tall">
                    <span class="title">Augean Hydra Console</span>
                    <paper-icon-button icon="icons:help-outline"
                                       hidden$="[[!hasApiDocumentation]]"
                                       on-tap="showDocs"></paper-icon-button>

                    <paper-input id="resource" class="middle title" label="address"
                                 pattern="^https?://.*" no-label-float auto-validate
                                 invalid="{{addressInvalid}}"
                                 value="[[url]]"
                                 on-keydown="loadOnEnter">
                        <iron-icon prefix icon="icons:language"></iron-icon>
                    </paper-input>
                    <iron-a11y-keys target="[[urlInput]]" keys="enter" on-keys-pressed="onEnter"></iron-a11y-keys>
                    <paper-icon-button class="middle" icon="av:play-circle-filled" disabled="[[addressInvalid]]"
                                       on-tap="load"></paper-icon-button>
                </paper-toolbar>

                <iron-pages attr-for-selected="data-state" selected="[[state]]">
                    <div data-state="ready">
                        Hello
                    </div>

                    <div id="spinner-container" data-state="loading">
                        <paper-spinner active></paper-spinner>
                    </div>

                    <div data-state="loaded">
                        <object-view object="[[displayedModel]]"></object-view>
                    </div>
                </iron-pages>
            </paper-header-panel>
        </paper-multidrawer-panel>

    </template>
</dom-module>

<script>
    System.import('src/augean-console');
</script>