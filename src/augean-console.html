<dom-module id="augean-console">
    <template>
        <style>
            :host {
                display: block;
            }
        </style>

        <form on-submit="load">
            <input id="resource" type="url" required="true" value="http://localhost:57548/links/2016/15"/>
            <input type="submit" value="Load resource"/>
        </form>

        <button on-tap="back" hidden$="[[!hasPreviousModel(_modelHistory.*)]]">Back</button>

        <object-view model="[[displayedModel]]" on-show-model="showModel"></object-view>
    </template>
</dom-module>

<dom-module id="object-view">
    <template>
        <style>
            :host {
                display: block;
            }
        </style>

        <template is="dom-if" if="[[isLiteral]]" restamp>
            <default-literal-view literal="[[model]]"></default-literal-view>
        </template>
        <template is="dom-if" if="[[isResource]]" restamp>
            <button on-tap="showModel" hidden$="[[!nested]]" data-to-show="[[model]]">Show</button>
            <template is="dom-if" if="[[!nested]]">
                <default-resource-view resource="[[model]]" nesting-level="[[nextLevel(nestingLevel)]]"></default-resource-view>
            </template>
        </template>
        <template is="dom-if" if="[[isArray]]" restamp>
            <template is="dom-repeat" items="[[arrayModel]]" as="item">
                <button on-tap="showModel" data-to-show="[[item]]" hidden$="[[!nested]]">Show</button>
                <template is="dom-if" if="[[!nested]]">
                    <object-view model="[[item]]" nesting-level="[[nestingLevel]]"></object-view>
                </template>
            </template>
        </template>
    </template>
</dom-module>

<dom-module id="default-literal-view">
    <template>
        <style>
            :host {
                display: block;
            }
        </style>

        <span>[[literalValue]]</span>
    </template>
</dom-module>

<dom-module id="default-resource-view">
    <template>
        <style>
            :host {
                display: block;
            }

            object-view {
                border-left: solid 2px black;
                padding-left: 5px
            }
        </style>

        <table>
            <template is="dom-repeat" items="[[getKeys(resource)]]" as="item">
                <tr>
                    <th>
                        <documented-property resource="[[resource]]" property-id="[[item.0]]"></documented-property>
                    </th>
                    <td>
                        <object-view model="[[item.1]]" nesting-level="[[nestingLevel]]"></object-view>
                    </td>
                </tr>
            </template>
        </table>
    </template>
</dom-module>

<dom-module id="documented-property">
    <template>
        {{propertyTitle}}
    </template>
</dom-module>

<script>
    System.import('src/augean-console');
</script>